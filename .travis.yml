language: java
install: gradle wrapper --gradle-version 4.8
sudo: required
jdk:
  - oraclejdk8
branches:
  only:
  - master
services:
  - docker
before_install:
  - docker run -p 6379:6379 -d --name redis redis:3.0.7-alpine
  - docker run -d --hostname rabbit --name rabbit -p 8080:15672 -p 5672:5672 rabbitmq:3-management
  - chmod +x gradlew
script:
  - "./gradlew clean build"
  - "./gradlew pitest"
after_success:
  - ./deploy.sh
env:
  global:
  - secure: NmBXwm2oB1RLgjMQTT88lkO4SdI4TUP1xcL0e+K+pDLFqJQIK9QsS8ELE8TflLzP6AIkNdSbAObh7+ULg0+4I8YHDmDXTP/8mM+DTVrd9z4CRhBaYu6lIGKMIBrTE+MIn57/zsgppIgXqJ5Zqql+mWG3bU2Svny9MHBOGcW4XUPim+pQlj++bAJxAlMQ4Ae/63H2ImbJRZfvHhOJemCZeaKlqlHNV/G850OD4Bh4sRhp6n25XRaYmnnD+iBHyKLqoGGpXpcGORB/k339MdPntQCvosTLMQCkcEBRrQB0Rx95aXPpsY8hux1adSh37kCqrOFUSxuvxY3LDTNSjE4KkY1TsRWmo2hye5Ei4hosGH/dEQObDwhfyhPBI3NCp2I+SCdQI6vcIUKCLnDRj54u/iajLVDaRlAtoTk9VxNyvPMWu7/grzgSg3ZOfmORrDa+htz9bs0UEnLEfwIAoKibwBcMUtOawn4OfjGYq4Qr9atRpb0MZquemdjeMxOtXG+dnpjTSWGnSnnu+ei5R2Z5lgjTd2sK2nYliP1DRY29ljKLGUHGhFc4DXwjraAXTXbFDmTgk+/HIA8UsolJA+l4nrnqcmdzInWc16UX58LnN2aKfg+Vd7rWXtiZAVthB6xk39HFb8pBRItPGMTN6livV1Dh4f4qE8w9sUZ2ojr3F48=
  - secure: QGkYSijPbmN7Z+xmQE4TnoqDKlGqf05AOOQ2jMAf2qindKMfJsCAnBZ/996685r5JUXKUH9Lckf9b/FGbS9n493rGpfuUjYUxJIJqJLWhg6k7wzdV1/E+34mzL4HTLuK09Is12mzgcNdQibs7uCF9Mjbd4hD0MqBJMm/t3HtZ7qLfpl3ILP7Qbq4aSiHyoBNfWL+3xCJuXtb2EA/rG9Jx+CbvEIrYSsInQOC07fZEKEGr978Njy4pIFQ2w8Vy5YKEoKaLifyQsWEIGdwTxMjdBrEZpo63yYO65ZwfpRFMBZJKcsA2Exkgnj2c+49CM3FhpkVKOZN0pHvfZU6EXaKSgBKxn7wQfuDH81Rbl19zySz/cOgGIfIR6hkzR+a2rEEnsbwmKRmV8pgEWaQIefH1v/7Xa8ZM7y79be8pspIij002jCa+FUjqjEEL3N8X5qYZ/lZRyPuxSM+YeM+OQh6LbqFIy7wQf2cbv+a12ONAlMpRQFiYCEkDt3VAxVXVZFJ4CIJ/LiIWkJyHQtMAgxPoqcX2S0ArO9y1p9BsRf0+wXeIAAYiJUWXgE7CVDTjuvOrTHUIYPOZSz4H+DHzq+x0RgClJ2LhBY3F9PeAtO55bN00bgZB/FB6f/1q/Rt4HuFLIhBUo43QZlB24zGn9Wa4Bi5ySeII8fZlWKiiMpst/E=
  - secure: l/cLI4ZxKIpF5FgucE5EVlxaQFhF1XPkbw+jGzo/kO5/ePEisx0uLpHZwnZXFjvBvdWEZLJniZd1JqNvpoeEb2jajidVYWzifSQCm2FAsCzJYB/qvmehZ6Bk5fr16wGxMLSmFArBe2cAusYtaiQEr01tUsfNm1ALXXPzQPijvo58l/FGKpMJwSdDXa10d4EqIlrQLmyFUIhv+WcNVFADs4wUB7X4NPKXoiuqDeShJKy4gSYRc+CPBDnOsl6VV5PLSWMyNGeKZyuH598BDaoVn55dL+Wp8DPD9kTXRqtDa2Aw+cmqtoyRFSJq8c5E937kocSMnw50JTqyKnTIpTeUVOuaOeexT5PcybK1yVy+ROrQyZMUNAARFAmURmWPY3q8LMgSPSVDA30Cp18L4sZh06OZZyP8uOvRQWAt7yjpcLxy2alw3S3I40BbWiKl6iTTo+LJl1WYzs4u7BmLxLsoARGpWEPwOkv9lWJHB6ncNGAsjKeOGDAKlY3UA7BQT8IIn48Vzuvus2MZEBYL9gTTi5xdOgvJOq+o4ZiZeIOQsuNOFqf7Z5tlCrESww/v3Vb2+Al1XlLG1FztI2R1Qmp4HUNCcL73QblCUQQ/O1gHcD2IMqLGC+WkwGdKv/ZwPSwdlIcuJr+5BtE5JI7tA+5qR2sDUv0iyGFoJQ0L0+AcGLI=
  - secure: UWqNlwuQqZx2ESHEz8oHmmumzmrBPAm2zsBBbn0aUjxw0SgmeaAKlNylL1iRYQTXOmMU8BLwzJ0e/KS2ka1MUe4UAOA5HY1NlbiBrE6yHk8uypOAsEBbZdI4XLUCauOfhwviK4uSBlG7Yae8rqdl1AYdk8EM311WM8r1RGyQKrdnBX8gOOJ93tzHKoFuFDk82lOKhlw+sFwlSxdf4t7HxWG7ZnEbOnZ/OHkjI+wLwSkTu1lWWgZRKfuMFUXo4Oxgp33roT3TlCirCYGiYzdH9rrQU6tK9OaPHeLqjGQaeA7tbaoCJ8RN1T0NtDBPfLc3mRNBNiouzZh/Qpn5XvvsIhtOgN9uMdglGprNahhIVwyG7559gRtBN/rkJg5kIQ9991OodHi0HSill35mRHSR318hVE2y21pI6XThSl8thDv6apvlk5e9CBSt2yHqumWXpPKSvxHpMer/1KRZ4akhPYc7qgh4ayPn8wau8sxolLcTetxVhA4tFFSCzNGNoSKG2EOShFNeE9lSMmz//wwBACSfd4hTbNyQrbTs1IRIn26sQHYzmYlsxhx6+h3qv8JxFWDSHo5mxotWLlzLpWpt6qrCqB9Jh5nPZVWN9sh31Y+6T9xL6nK3OoRQSaFaAKE10LwKHbi7FxlHDkCSF9f269MRTgRnfRtlM+LwANj6wbE=
